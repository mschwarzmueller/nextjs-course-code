{"version":3,"sources":["../../../server/api-utils/node.ts"],"names":["tryGetPreviewData","parseBody","apiResolver","req","res","options","checkIsManualRevalidate","isManualRevalidate","SYMBOL_PREVIEW_DATA","getCookies","getCookieParser","headers","cookies","hasBypass","COOKIE_NAME_PRERENDER_BYPASS","hasData","COOKIE_NAME_PRERENDER_DATA","clearPreviewData","previewModeId","tokenPreviewData","encryptedPreviewData","jsonwebtoken","verify","previewModeSigningKey","decryptedPreviewData","decryptWithSecret","Buffer","from","previewModeEncryptionKey","data","JSON","parse","Object","defineProperty","value","enumerable","limit","contentType","type","parameters","encoding","charset","buffer","getRawBody","require","e","isError","ApiError","body","toString","parseJson","qs","decode","query","resolverModule","apiContext","propagateError","dev","page","apiReq","apiRes","config","statusCode","end","bodyParser","api","responseLimit","externalResolver","setLazyProp","previewData","undefined","sizeLimit","contentLength","maxContentLength","getMaxContentLength","writeData","write","endResponse","args","byteLength","apply","length","console","warn","url","bytes","format","status","sendStatusCode","send","sendData","json","sendJson","redirect","statusOrUrl","setPreviewData","assign","revalidate","urlPath","opts","unstable_revalidate","Error","resolver","interopDefault","wasPiped","process","env","NODE_ENV","once","isResSent","err","sendError","message","error","context","startsWith","revalidateHeaders","PRERENDER_REVALIDATE_HEADER","unstable_onlyGenerated","PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER","trustHostHeader","fetch","host","method","cookie","cacheHeader","get","toUpperCase","mockReq","mockRes","streamPromise","mockRequest","getHeader","str","removeHeader","Stream","setHeader","pipe","isJSONLike","includes","stringifiedBody","stringify","etag","generateETag","sendEtagResponse","isBuffer","jsonBody","isNotValidData","payload","sign","encryptWithSecret","algorithm","maxAge","expiresIn","serialize","previous","Array","isArray","httpOnly","sameSite","secure","path","RESPONSE_LIMIT_DEFAULT"],"mappings":"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"}